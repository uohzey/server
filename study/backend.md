#### 初始化路由相关文件夹

- 在项目根目录中,新建router文件夹,存放所有的路由模块
  - 路由模块只存放客户端的请求与处理函数之间的映射关系
- 在项目根目录中,新建router_handler文件夹,用来存放所有的路由处理函数模块
  - 路由处理函数模块中,专门负责存放每个路由对应的处理函数



#### mysql模块

- 注册
  - 检测表单数据是否合法
  - 检测用户名是否被占用
  - 对密码进行加密处理
    - 加密之后的密码,无法被逆向破解
    - 同一明文密码多次加密,得到的加密结果各不相同,保证了安全性
  - 插入新用户



#### 优化表单数据验证

- 前端验证为辐,后端验证为主
- 单纯使用if...else...的形式对数据合法性进行验证,效率低下,出错率高,维护性差,使用第三方模块,来降低出错路,提高验证的效率与可维护性.
- joi:为表单中写单的每个数据项,定义验证规则
- @escook/express-joi中间件:自动对表单数据进行验证

#### 登录

- 检验表单数据是否合法
- 根据用户名查询用户的数据
- 判断用户输入的密码是否正确
  - 调用bcrypt.compareSync(用户提交的密码,数据库中的密码)方法比较密码是否一致
  - 返回值是bool
- 生成jwt字符串
  - 生成token字符串的时候,剔除密码和头像的值
  - **es6高级语法**

